# Тесты

Тесты в процессе разработки выступают в качестве дополнительного слоя защиты, который страхует от возможных непредсказуемых изменений. Тесты позволяют защитить код от потенциальных ошибок.

Многие начинающие разработчики недооценивают важность тестирования, однако в процессе роста количества логики тесты являются ключевым 'регулятором' изменений.

---

## Простой тест

Быстрее переварить получится на практике, так что давайте попробуем сделать пару файлов, содержащие функции и тесты для них.

Файл `func.py`:
```python
"""file with dangerous function"""


def double_capitalize(inp: str) -> str:
    """funciton that capitilizes and doubles string"""
    return inp.upper() * 2

```

Файл `func_test.py`:
```python
"""file to test dangerous funciton"""
from func import double_capitalize


def test_double_capitalize():
    assert double_capitalize("avatar") == "AVATARAVATAR"
    assert double_capitalize("cocaCola") == "COCACOLACOCACOLA"

```

Отлично! Теперь у нас есть файл с функционалом и файл с тестом. Нам нужно будет 1 раз настроить тестовый фреймворк в рамках рабочей директории (папка с нашими файлами), после чего можно будет запускать тесты из интерфейса.

1. Для начала установим тестовый фреймворк:
```python
pip install pytest
```
2. Далее нажмём `F1` и выберем найдем `Python: Configure Tests`
3. Выберем `pytest`, и попробуем открыть вкладку с тестами:
    <p align="left">
    <img width="500px" height="500px" src="test1.png" alt="logo"/>
    </p>
4. Теперь мы можем запустить тест (через кнопку) и посмотреть на результат:
    <p align="left">
    <img width="500px" height="500px" src="test2.png" alt="logo"/>
    </p>
5. Проверяем, что тест отработал и идём спокойно пить чай

---

## 7 принцпов тестирования

Данный материал культурно позимствован с [luxoft-training](https://www.luxoft-training.ru/about/news/7_printsipov_testirovaniya_CHast_1/), где хорошо объясняется зачем нужно тестирование в основных принципах:

1. Тестирование показывает наличие дефектов
    Тестирование может показать, что дефекты присутствуют, но не может доказать, что дефектов нет. 
2. Исчерпывающее тестирование невозможно
    Вместо попыток «протестировать всё» нам нужен некий подход к тестированию (стратегия), который обеспечит правильный объем тестирования для данного проекта, данных заказчиков (и других заинтересованных лиц) и данного продукта.
3. Раннее тестирование
    Тестовые активности должны начинаться как можно раньше в цикле разработки и быть сфокусированы на определенных целях.
4. Скопление дефектов
    Небольшое количество модулей содержит большинство дефектов, обнаруженных на этапе предрелизного тестирования, или же демонстрируют наибольшее количество отказов на этапе эксплуатации.
5. Парадокс пестицидов
    Если повторять те же тесты снова и снова, в какой-то момент этот набор тестов перестанет выявлять новые дефекты.
6. Тестирование зависит от контекста
    Тестирование выполняется по-разному, в зависимости от контекста. Например, тестирование систем, критических с точки зрения безопасности, проводится иначе, чем тестирование сайта интернет-магазина.
7. Заблуждение об отсутствии ошибок
    Нахождение и исправление дефектов бесполезно, если построенная система неудобна для использования и не соответствует нуждам и ожиданиям пользователей.



---

## Дзен TDD

<p align="center">
    <img width="500px" height="500px" src="tdd.png" alt="logo"/>
</p>

Процесс разработки через тестирование — это методология разработки программного обеспечения, которая основывается на повторении коротких циклов разработки: изначально пишется тест, покрывающий желаемое изменение, затем пишется программный код, который реализует желаемое поведение системы и позволит пройти написанный тест, а затем проводится рефакторинг написанного кода с постоянной проверкой прохождения всех тестов.

Данная методология позволяет исключить из процесса разработки код, который не покрыт тестами, что **значительно** повышает стабильность кода и финального продукта. 

---

## На потом

Сложно в рамках вводного курса объяснить значимость тестирования при разработке, однако существует довольно много материалов позовляющих получить лучшее представление о  процессе тестирования:

- Test-Driven Development with Python: Obey the Testing Goat: Using Django, Selenium, and JavaScript - Harry Percival
- Test-Driven Development by Example - Kent Beck
- JUnit Pocket Guide - Kent Beck


---

## Интерпретатор

<iframe src="https://trinket.io/embed/python" width="100%" height="356" frameborder="0" marginwidth="0" marginheight="0" allowfullscreen></iframe>